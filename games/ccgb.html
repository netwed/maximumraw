<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canadian Checkers vs Computer</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #1a1a1a;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
      color: white;
    }

    .game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      width: 100%;
      max-width: 1200px;
    }

    .game-title {
      font-size: 1.5rem;
      text-align: center;
    }

    .score-board {
      display: flex;
      justify-content: space-around;
      width: 100%;
      max-width: 400px;
      background: #2a2a2a;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
    }

    .score {
      text-align: center;
    }

    .score-label {
      font-size: 0.9rem;
      color: #888;
    }

    .score-value {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      aspect-ratio: 1;
      max-width: 90vw;
      width: 100%;
      background: #fff;
      border: 4px solid #654321;
    }

    .square {
      aspect-ratio: 1;
      position: relative;
      cursor: pointer;
    }

    .square.dark {
      background: #654321;
    }

    .square.light {
      background: #DEB887;
    }

    .piece {
      position: absolute;
      width: 80%;
      height: 80%;
      border-radius: 50%;
      top: 10%;
      left: 10%;
      border: 2px solid #333;
      transition: all 0.3s ease;
    }

    .piece.white {
      background: #fff;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
    }

    .piece.black {
      background: #000;
      box-shadow: inset 0 0 10px rgba(255,255,255,0.3);
    }

    .piece.king::after {
      content: 'â˜…';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.2em;
      color: #FFD700;
    }

    .piece.selected {
      box-shadow: 0 0 15px #4CAF50;
      transform: scale(1.1);
    }

    .square.valid-move::after {
      content: '';
      position: absolute;
      width: 30%;
      height: 30%;
      border-radius: 50%;
      background: rgba(76, 175, 80, 0.5);
      top: 35%;
      left: 35%;
    }

    .controls {
      margin-top: 1rem;
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    button {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.2s;
      background: #4CAF50;
      color: white;
    }

    button:hover {
      transform: translateY(-2px);
    }

    .turn-indicator {
      margin: 1rem 0;
      font-size: 1.25rem;
      color: #4CAF50;
    }

    .captured-piece {
      animation: capture 0.5s ease-out;
      opacity: 0;
    }

    @keyframes capture {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(0); opacity: 0; }
    }

    .win-message, .lose-message {
      font-size: 2rem;
      color: gold;
      margin-top: 20px;
    }

    .lose-message {
      color: red;
    }

    /* Mobile-Friendly Adjustments */
    @media (max-width: 600px) {
      .board {
        max-width: 100%;
      }

      .score-board {
        flex-direction: column;
        max-width: 100%;
        gap: 1rem;
      }

      button {
        width: 100%;
        max-width: 200px;
      }
    }
  </style>
</head>
<body>
  <div class="game-container">
    <h1 class="game-title">Canadian Checkers vs Computer</h1>
    
    <div class="score-board">
      <div class="score">
        <div class="score-label">Player (White)</div>
        <div class="score-value" id="playerScore">0</div>
      </div>
      <div class="score">
        <div class="score-label">Computer (Black)</div>
        <div class="score-value" id="computerScore">0</div>
      </div>
    </div>

    <div class="turn-indicator" id="turnIndicator">Your Turn</div>
    <div class="board" id="board"></div>
    
    <div class="controls">
      <button onclick="resetGame()">New Game</button>
    </div>

    <div id="winMessage" class="win-message"></div>
    <div id="loseMessage" class="lose-message"></div>
  </div>

  <script>
    const BOARD_SIZE = 12;
    let board = [];
    let selectedPiece = null;
    let validMoves = [];
    let isComputerTurn = false;
    let playerScore = 0;
    let computerScore = 0;

    // Initialize the board
    function initializeBoard() {
      board = [];
      for (let row = 0; row < BOARD_SIZE; row++) {
        board[row] = [];
        for (let col = 0; col < BOARD_SIZE; col++) {
          if ((row + col) % 2 === 1) {
            if (row < 5) {
              board[row][col] = { color: 'black', king: false };
            } else if (row > 6) {
              board[row][col] = { color: 'white', king: false };
            } else {
              board[row][col] = null;
            }
          } else {
            board[row][col] = null;
          }
        }
      }
    }

    // Update scores display
    function updateScores() {
      document.getElementById('playerScore').textContent = playerScore;
      document.getElementById('computerScore').textContent = computerScore;
    }

    // Create the board UI
    function createBoard() {
      const boardElement = document.getElementById('board');
      boardElement.innerHTML = '';
      
      for (let row = 0; row < BOARD_SIZE; row++) {
        for (let col = 0; col < BOARD_SIZE; col++) {
          const square = document.createElement('div');
          square.className = `square ${(row + col) % 2 === 0 ? 'light' : 'dark'}`;
          square.dataset.row = row;
          square.dataset.col = col;
          square.onclick = () => handleSquareClick(row, col);
          
          const piece = board[row][col];
          if (piece) {
            const pieceElement = document.createElement('div');
            pieceElement.className = `piece ${piece.color}${piece.king ? ' king' : ''}`;
            square.appendChild(pieceElement);
          }
          
          boardElement.appendChild(square);
        }
      }
      updateTurnIndicator();
    }

    // Handle click on a square
    function handleSquareClick(row, col) {
      if (isComputerTurn) return;
      
      const piece = board[row][col];
      
      if (selectedPiece) {
        const validMove = validMoves.find(move => move.row === row && move.col === col);
        if (validMove) {
          movePiece(selectedPiece, row, col, validMove.capture);
          clearSelection();
          
          // Check for winner
          if (checkForWin()) {
            document.getElementById('winMessage').textContent = 'You Win!';
            return;
          }
          
          // Check for loss
          if (checkForLoss()) {
            document.getElementById('loseMessage').textContent = 'You Lose!';
            return;
          }

          // Start computer's turn after a delay
          isComputerTurn = true;
          setTimeout(computerMove, 500);
          updateTurnIndicator();
        } else {
          clearSelection();
          if (piece && piece.color === 'white') {
            selectPiece(row, col);
          }
        }
      } else if (piece && piece.color === 'white') {
        selectPiece(row, col);
      }
    }

    // Select a piece
    function selectPiece(row, col) {
      selectedPiece = { row, col };
      validMoves = getValidMoves(row, col);
      
      const square = document.querySelector(`[data-row="${row}"][data-col="${col}"] .piece`);
      square.classList.add('selected');
      
      validMoves.forEach(move => {
        const moveSquare = document.querySelector(`[data-row="${move.row}"][data-col="${move.col}"]`);
        moveSquare.classList.add('valid-move');
      });
    }

    // Clear selection
    function clearSelection() {
      document.querySelectorAll('.piece.selected').forEach(piece => 
        piece.classList.remove('selected'));
      document.querySelectorAll('.valid-move').forEach(square => 
        square.classList.remove('valid-move'));
      selectedPiece = null;
      validMoves = [];
    }

    // Get valid moves for a piece
    function getValidMoves(row, col) {
      const moves = [];
      const piece = board[row][col];
      const directions = piece.king ? [-1, 1] : piece.color === 'white' ? [-1] : [1];
      
      directions.forEach(dRow => {
        [-1, 1].forEach(dCol => {
          const newRow = row + dRow;
          const newCol = col + dCol;
          if (newRow >= 0 && newRow < BOARD_SIZE && newCol >= 0 && newCol < BOARD_SIZE) {
            const targetSquare = board[newRow][newCol];
            if (!targetSquare) {
              moves.push({ row: newRow, col: newCol, capture: false });
            } else if (targetSquare.color !== piece.color) {
              const captureRow = newRow + dRow;
              const captureCol = newCol + dCol;
              if (captureRow >= 0 && captureRow < BOARD_SIZE && captureCol >= 0 && captureCol < BOARD_SIZE) {
                const captureSquare = board[captureRow][captureCol];
                if (!captureSquare) {
                  moves.push({ row: captureRow, col: captureCol, capture: true });
                }
              }
            }
          }
        });
      });

      return moves;
    }

    // Move a piece
    function movePiece(from, toRow, toCol, capture) {
      const piece = board[from.row][from.col];
      board[toRow][toCol] = piece;
      board[from.row][from.col] = null;

      if (capture) {
        const capturedRow = (from.row + toRow) / 2;
        const capturedCol = (from.col + toCol) / 2;
        const capturedPiece = board[capturedRow][capturedCol];
        if (capturedPiece.color === 'white') {
          computerScore++;
        } else {
          playerScore++;
        }
        board[capturedRow][capturedCol] = null;
      }
      
      // Check for kinging
      if (toRow === 0 && piece.color === 'white') {
        piece.king = true;
      }
      if (toRow === BOARD_SIZE - 1 && piece.color === 'black') {
        piece.king = true;
      }

      // Update the board and scores
      updateScores();
      createBoard();
    }

    // Check for win
    function checkForWin() {
      for (let row = 0; row < BOARD_SIZE; row++) {
        for (let col = 0; col < BOARD_SIZE; col++) {
          if (board[row][col] && board[row][col].color === 'white') {
            return false;
          }
        }
      }
      return true;
    }

    // Check for loss
    function checkForLoss() {
      for (let row = 0; row < BOARD_SIZE; row++) {
        for (let col = 0; col < BOARD_SIZE; col++) {
          if (board[row][col] && board[row][col].color === 'black') {
            return false;
          }
        }
      }
      return true;
    }

    // Computer's move
    function computerMove() {
      const allMoves = [];
      for (let row = 0; row < BOARD_SIZE; row++) {
        for (let col = 0; col < BOARD_SIZE; col++) {
          if (board[row][col]?.color === 'black') {
            const moves = getValidMoves(row, col);
            moves.forEach(move => {
              allMoves.push({
                from: { row, col },
                to: move
              });
            });
          }
        }
      }

      if (allMoves.length > 0) {
        const captureMoves = allMoves.filter(move => move.to.capture);
        const moveToMake = captureMoves.length > 0 
          ? captureMoves[Math.floor(Math.random() * captureMoves.length)]
          : allMoves[Math.floor(Math.random() * allMoves.length)];

        movePiece(
          moveToMake.from,
          moveToMake.to.row,
          moveToMake.to.col,
          moveToMake.to.capture
        );
      }

      isComputerTurn = false;
      updateTurnIndicator();
      
      // Check for winner
      if (checkForWin()) {
        document.getElementById('winMessage').textContent = 'You Win!';
      }

      // Check for loss
      if (checkForLoss()) {
        document.getElementById('loseMessage').textContent = 'You Lose!';
      }
    }

    // Update the turn indicator
    function updateTurnIndicator() {
      const turnIndicator = document.getElementById('turnIndicator');
      turnIndicator.textContent = isComputerTurn ? "Computer's Turn" : "Your Turn";
    }

    // Reset the game
    function resetGame() {
  // Reset scores to 0
  playerScore = 0;
  computerScore = 0;

  // Reset the board to its initial state
  initializeBoard();
  createBoard();

  // Update the score display
  updateScores();

  // Clear any win/lose messages
  document.getElementById('winMessage').textContent = '';
  document.getElementById('loseMessage').textContent = '';

  // Ensure the turn indicator is correctly set for the player's turn
  document.getElementById('turnIndicator').textContent = "Your Turn";
}


    // Initialize the game when the page loads
    window.onload = function() {
      initializeBoard();
      createBoard();
    };
  </script>
</body>
</html>
